<div class="bg-white rounded-3xl shadow-sm border border-gray-100 p-8 h-full">
      
      <!-- En-tête : Titre + Sélecteur -->
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4">
        <h2 class="text-2xl font-serif text-[#153e35] font-bold">
          {{ title }}
        </h2>
        
        @if (questions.length > 0) {
          <select 
            [ngModel]="selectedQuestion" 
            (ngModelChange)="onSelect($event)"
            class="block w-full sm:w-auto min-w-[300px] rounded-lg border-gray-200 bg-[#FDFBF7] text-gray-700 py-2.5 px-4 text-sm focus:border-[#153e35] focus:ring-[#153e35] shadow-sm font-medium cursor-pointer"
          >
            <option value="" disabled>Choisir une question...</option>
            @for (q of questions; track q) {
              <option [value]="q">{{ q }}</option>
            }
          </select>
        }
      </div>

      <!-- Corps : Graphiques -->
      @if (selectedQuestion) {
        <div class="space-y-6">
          @for (stat of stats; track stat.label; let i = $index) {
            <div 
              (click)="toggleFilter(stat.label)"
              class="group cursor-pointer"
            >
              <!-- Labels et Pourcentages -->
              <div class="flex justify-between text-sm mb-2">
                <span class="font-bold text-[#153e35] transition-all group-hover:translate-x-1"
                      [class.text-[#153e35]]="activeFilter === stat.label">
                  {{ stat.label }}
                </span>
                <span class="font-bold text-[#153e35]">
                  {{ stat.percentage }}%
                </span>
              </div>
              
              <!-- Barre de progression -->
              <div class="w-full bg-[#FFFBEB] rounded-full h-4 overflow-hidden">
                <div 
                  class="h-4 rounded-full transition-all duration-700 ease-out"
                  [ngClass]="getBarColorClass(i, activeFilter === stat.label)"
                  [style.width.%]="stat.percentage"
                ></div>
              </div>
            </div>
          }
        </div>
    } @else {
    <div class="text-center py-12 text-gray-400 italic font-serif">
        Sélectionnez une question ci-dessus pour visualiser la répartition.
    </div>
    }
</div>