<!-- BOUTON HAMBURGER (Visible uniquement sur mobile) -->
<!-- MODIFICATION : Remplacement de 'left-4' par 'right-4' pour le placer à droite -->
<button (click)="toggleMobileMenu()" 
        class="md:hidden fixed top-4 right-4 z-60 p-2.5 rounded-full bg-[#153e35] text-white shadow-lg border border-white/10 hover:bg-[#065F46] transition-colors focus:outline-none"
        aria-label="Ouvrir le menu">
  <!-- Icône changeante (Menu / Croix) -->
  @if (!isMobileMenuOpen) {
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
    </svg>
  } @else {
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
    </svg>
  }
</button>

<!-- FOND SOMBRE (BACKDROP) pour mobile -->
@if (isMobileMenuOpen) {
  <div (click)="toggleMobileMenu()" 
       class="fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden transition-opacity">
  </div>
}

<!-- BARRE LATÉRALE -->
<!-- 
  Explication des classes Responsive :
  - Mobile par défaut : 'fixed inset-y-0 left-0' (position fixe), '-translate-x-full' (caché à gauche)
  - Mobile ouvert : 'translate-x-0' (visible) via le binding [class]
  - Desktop (md:) : 'md:translate-x-0' (toujours visible), 'md:sticky' (fixe au scroll)
-->
<aside class="fixed inset-y-0 left-0 z-50 w-64 bg-[#153e35] text-white flex flex-col h-screen shadow-2xl transition-transform duration-300 ease-in-out md:translate-x-0 md:sticky md:top-0 md:shadow-xl"
       [class.translate-x-0]="isMobileMenuOpen"
       [class.-translate-x-full]="!isMobileMenuOpen">

  <!-- Logo / Marque -->
  <div class="p-8 pb-4 flex justify-between items-center">
    <a routerLink="/landing" class="block" aria-label="Aller à la page d'accueil">
      <img src="VeraLogo1.png" alt="VERA" class="h-20 w-auto md:h-16 block" />
    </a>
  </div>

  <!-- Séparateur discret -->
  <div class="h-px bg-white/10 mx-6 mb-6"></div>

  <!-- Menu de navigation -->
  <nav class="flex-1 px-4 space-y-2 overflow-y-auto">
    @for (item of menuItems; track item.label) {
      <a [routerLink]="item.route" 
         class="flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group cursor-pointer outline-none focus:ring-2 focus:ring-[#4ADE80]/50"
         [ngClass]="item.active ? 'bg-white/10 text-white shadow-sm border border-white/5' : 'text-white/60 hover:bg-white/5 hover:text-white'">
        
        <div class="w-5 h-5 shrink-0">
          @if (item.icon === 'dashboard') {
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" />
            </svg>
          }
          @if (item.icon === 'forms') {
             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
            </svg>
          }
        </div>

        <span class="font-medium text-sm">{{ item.label }}</span>

        @if (item.active) {
          <span class="ml-auto w-1.5 h-1.5 rounded-full bg-[#4ADE80] shadow-[0_0_8px_rgba(74,222,128,0.5)]"></span>
        }
      </a>
    }
  </nav>

  <!-- Bouton de déconnexion en bas -->
  <div class="mt-auto p-4 border-t border-white/10">
    <button 
      (click)="onLogout()"
      class="w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 text-white/60 hover:bg-white/5 hover:text-white cursor-pointer group">
      <div class="w-5 h-5 shrink-0">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
        </svg>
      </div>
      <span class="font-medium text-sm">Déconnexion</span>
    </button>
  </div>

</aside>